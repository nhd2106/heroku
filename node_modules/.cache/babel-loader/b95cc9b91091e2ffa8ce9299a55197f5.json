{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\ngohu\\\\Desktop\\\\hoc-renderprops-15122019\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"C:\\\\Users\\\\ngohu\\\\Desktop\\\\hoc-renderprops-15122019\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\n// khởi tạo giá trị ban đầu\nconst stateGioHang = {\n  gioHang: [{\n    maSP: 1,\n    tenSP: \"iphone\",\n    soLuong: 1,\n    hinhAnh: './img/applephone.jpg',\n    giaBan: 1000,\n    thanhTien: 1000\n  }]\n};\nexport const GioHangReducer = (state = stateGioHang, action) => {\n  switch (action.type) {\n    case 'THEM_GIO_HANG':\n      {\n        // xử lý logic thêm giỏ hàng\n        let gioHangCapNhat = [...state.gioHang];\n        let index = gioHangCapNhat.findIndex(spGH => spGH.maSP === action.spGioHang.maSP);\n\n        if (index !== -1) {\n          gioHangCapNhat[index].soLuong += 1;\n        } else {\n          gioHangCapNhat.push(action.spGioHang);\n        }\n\n        state.gioHang = gioHangCapNhat;\n        return _objectSpread({}, state);\n      }\n\n    case 'XOA_GIO_HANG':\n      {\n        let gioHangCapNhat = [...state.gioHang]; //xóa giỏ hàng dựa vào index\n\n        gioHangCapNhat.splice(action.index, 1); // gán giỏ hàng mới cho state để render lại giao diện\n\n        state.gioHang = gioHangCapNhat;\n        return _objectSpread({}, state);\n      }\n\n    case 'TANG_GIAM_SL':\n      {\n        let gioHangCapNhat = [...state.gioHang];\n\n        const _action = _slicedToArray(action, 2),\n              index = _action[0],\n              tangGiam = _action[1];\n\n        if (tangGiam) {\n          gioHangCapNhat[index].soLuong += 1;\n        } else {\n          if (gioHangCapNhat[index].soLuong > 1) {\n            gioHangCapNhat[index].soLuong -= 1;\n          }\n        }\n      }\n  }\n\n  return _objectSpread({}, state);\n};","map":{"version":3,"sources":["C:/Users/ngohu/Desktop/hoc-renderprops-15122019/src/redux/reducer/GioHangReducer.js"],"names":["stateGioHang","gioHang","maSP","tenSP","soLuong","hinhAnh","giaBan","thanhTien","GioHangReducer","state","action","type","gioHangCapNhat","index","findIndex","spGH","spGioHang","push","splice","tangGiam"],"mappings":";;AAAA;AACA,MAAMA,YAAY,GAAG;AACjBC,EAAAA,OAAO,EAAG,CAAC;AAACC,IAAAA,IAAI,EAAE,CAAP;AAAUC,IAAAA,KAAK,EAAE,QAAjB;AAA2BC,IAAAA,OAAO,EAAE,CAApC;AAAuCC,IAAAA,OAAO,EAAE,sBAAhD;AAAwEC,IAAAA,MAAM,EAAE,IAAhF;AAAqFC,IAAAA,SAAS,EAAE;AAAhG,GAAD;AADO,CAArB;AAIA,OAAO,MAAMC,cAAc,GAAG,CAACC,KAAK,GAAGT,YAAT,EAAuBU,MAAvB,KAAkC;AAC5D,UAAQA,MAAM,CAACC,IAAf;AACI,SAAK,eAAL;AAAqB;AACpB;AACA,YAAIC,cAAc,GAAG,CAAC,GAAGH,KAAK,CAACR,OAAV,CAArB;AACA,YAAIY,KAAK,GAAGD,cAAc,CAACE,SAAf,CAAyBC,IAAI,IAAIA,IAAI,CAACb,IAAL,KAAcQ,MAAM,CAACM,SAAP,CAAiBd,IAAhE,CAAZ;;AACA,YAAGW,KAAK,KAAG,CAAC,CAAZ,EAAc;AACVD,UAAAA,cAAc,CAACC,KAAD,CAAd,CAAsBT,OAAtB,IAAgC,CAAhC;AACH,SAFD,MAEM;AACFQ,UAAAA,cAAc,CAACK,IAAf,CAAoBP,MAAM,CAACM,SAA3B;AACH;;AACDP,QAAAA,KAAK,CAACR,OAAN,GAAgBW,cAAhB;AACA,iCAAWH,KAAX;AACA;;AACD,SAAK,cAAL;AAAqB;AACjB,YAAIG,cAAc,GAAG,CAAC,GAAGH,KAAK,CAACR,OAAV,CAArB,CADiB,CAEjB;;AACAW,QAAAA,cAAc,CAACM,MAAf,CAAsBR,MAAM,CAACG,KAA7B,EAAoC,CAApC,EAHiB,CAIjB;;AACAJ,QAAAA,KAAK,CAACR,OAAN,GAAgBW,cAAhB;AACA,iCAAWH,KAAX;AACH;;AACD,SAAK,cAAL;AAAqB;AACjB,YAAIG,cAAc,GAAG,CAAC,GAAGH,KAAK,CAACR,OAAV,CAArB;;AADiB,uCAEQS,MAFR;AAAA,cAEVG,KAFU;AAAA,cAEJM,QAFI;;AAGjB,YAAGA,QAAH,EAAa;AACTP,UAAAA,cAAc,CAACC,KAAD,CAAd,CAAsBT,OAAtB,IAAiC,CAAjC;AACH,SAFD,MAEM;AACF,cAAGQ,cAAc,CAACC,KAAD,CAAd,CAAsBT,OAAtB,GAA+B,CAAlC,EAAoC;AAChCQ,YAAAA,cAAc,CAACC,KAAD,CAAd,CAAsBT,OAAtB,IAAiC,CAAjC;AACH;AAEJ;AAGJ;AAlCL;;AAwCA,2BAAWK,KAAX;AACH,CA1CM","sourcesContent":["// khởi tạo giá trị ban đầu\r\nconst stateGioHang = {\r\n    gioHang : [{maSP: 1, tenSP: \"iphone\", soLuong: 1, hinhAnh: './img/applephone.jpg', giaBan: 1000,thanhTien: 1000}]\r\n}\r\n\r\nexport const GioHangReducer = (state = stateGioHang, action) => {\r\n    switch (action.type) {\r\n        case 'THEM_GIO_HANG':{\r\n         // xử lý logic thêm giỏ hàng\r\n         let gioHangCapNhat = [...state.gioHang];\r\n         let index = gioHangCapNhat.findIndex(spGH => spGH.maSP === action.spGioHang.maSP);\r\n         if(index!==-1){\r\n             gioHangCapNhat[index].soLuong +=1;\r\n         }else {\r\n             gioHangCapNhat.push(action.spGioHang);\r\n         }\r\n         state.gioHang = gioHangCapNhat;\r\n         return {...state};\r\n        }\r\n        case 'XOA_GIO_HANG': {\r\n            let gioHangCapNhat = [...state.gioHang]\r\n            //xóa giỏ hàng dựa vào index\r\n            gioHangCapNhat.splice(action.index, 1);\r\n            // gán giỏ hàng mới cho state để render lại giao diện\r\n            state.gioHang = gioHangCapNhat\r\n            return {...state}\r\n        }\r\n        case 'TANG_GIAM_SL': {\r\n            let gioHangCapNhat = [...state.gioHang]\r\n            const [index,tangGiam] = action\r\n            if(tangGiam) {\r\n                gioHangCapNhat[index].soLuong += 1;\r\n            }else {\r\n                if(gioHangCapNhat[index].soLuong >1){\r\n                    gioHangCapNhat[index].soLuong -= 1\r\n                }\r\n                \r\n            }\r\n            \r\n\r\n        }\r\n            \r\n            \r\n    \r\n       \r\n    }\r\n    return {...state}\r\n}"]},"metadata":{},"sourceType":"module"}